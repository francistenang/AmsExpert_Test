{% extends 'manage/index.html'%}
{% block manage_content %}
 <!-- Begin Page Content -->
  <div style="" class="main-content">
      
  <!-- /end of search area -->
  <h2 class="title" style="color: #112A46;font-weight: 700;">Tableau de bord</h2>
  {% if current_user.TYPE != "Admin" %}
      <div class="section-stats">
        <div class="card">
            <i class="fas fa-ellipsis-v fa-left" onclick="openSubCard(event)"></i>
            <p>nombre de mission</p>
            <h4 class="icon">{{missionexpert}}</h4>
            <div class="dropdown-menu dropdown-menu-end">
              <a class="dropdown-item" href="#">Réglée(s): {{regexp}}</a>
              <a class="dropdown-item" href="#">Non réglée(s): {{nregexp}}</a>
              <a class="dropdown-item" href="#">Anomalie(s): {{anoexp}}</a>
            </div>
        </div>
        <div class="card">
          <i class="fas fa-ellipsis-v fa-left" onclick="openSubCard(event)"></i>
          <p>nombre de factures</p>
          <h4 class="icon">{{factureexpert}}</h4>
          <div class="dropdown-menu dropdown-menu-end">
            <a class="dropdown-item" href="#">Facture expert générée(s): {{factureexpertgenere}}</a>
            <a class="dropdown-item" href="#">Facture expert non générée(s): {{factureexpertnongenere}}</a>
          </div>
        </div>
    </div>
  {% else %}
   
  {% endif %}
    <!--  -->

    <div style="margin-top: 1.25rem;" class="">
      <h2 style="color: #112A46;font-weight: 700;">Statistiques</h2><br />
      <div class="stat-charts" style="margin-top: .25rem;margin-bottom: 4rem;">   {% if current_user.TYPE != 'Admin' %}     
          <div class="card" style="padding:0px;"> 
            <header class="card-header">
              <p class="card-header-title">
                Chiffre d'affaire (€) par mois
              </p>
            </header> <br/>
            <div class="card-content">
              <canvas id="expertTotalPerMonth" width="400" height="400"></canvas> 
            </div>
          </div>
          <div class="card" style="padding:0px;">
            <header class="card-header">
              <p class="card-header-title">
                Chiffre d'affaire (€) par an
              </p>
            </header> <br/>
            <div class="card-content">
              <canvas id="expertTotalPerYear" width="400" height="400"></canvas>
            </div>
          </div> 
       
        {% endif %}
      </div>     </div> 
  </div> 
  <script type="text/Javascript">
    function openSubCard(e) {
      var dropdown = e.target.nextElementSibling.nextElementSibling.nextElementSibling
      var dropdownClass = dropdown.classList
      if (dropdownClass.contains('show')) {
        dropdownClass.toggle('show')
      } else {
        dropdownClass.toggle('show')
      }
    }
  </script>

 
    <!-- /.container-fluid -->
{% endblock manage_content %}

{% block scripts %}
<script type="text/javascript" src="{{url_for('static', filename='js/expertStats.js')}}"></script>
{% endblock scripts %}